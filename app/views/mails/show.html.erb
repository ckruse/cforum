<%
content_for :title, t('mails.post_from', :name => @mail.sender.username)
%><h1><%= t('mails.post_from', :name => @mail.sender.username) %></h1>

<article class="message">
  <header>
    <h2><%= @mail.subject %></h2>

    <details open>
      <summary><%= t('mails.post_from_to', sender: @mail.sender.username,
                     recipient: @mail.recipient.username) %> <%= t('mails.at') %>
        <time datetime="<%= @mail.created_at.to_s %>"><%= l(@mail.created_at, format: date_format) %></time></summary>
    </details>
  </header>

  <div class="posting-content cf-box">
    <%= @mail.to_html(self) %>
  </div>
</article>

<div class="form-actions">
  <%= link_to t('mails.answer_mail'), new_mail_path(priv_message_id: @mail.priv_message_id, quote_old_message: 'yes'), class: 'cf-btn' %>
  <%= link_to t('mails.answer_mail_wo_quote'), new_mail_path('priv_message_id' => @mail.priv_message_id), class: 'cf-btn' %>
  <%= link_to t('mails.delete'), mail_path(@mail.sender.username, @mail), method: :delete, data: {confirm: t('global.are_you_sure')}, class: 'cf-btn' %>
</div>
